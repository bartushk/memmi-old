language: node_js
node_js:
- 4.2.4
script: cd app && npm test
addons:
  hosts:
    - $DEPLOY_DEV_HOST
  apt:
    packages:
    - sshpass
after_success:
- export SSHPASS=$DEPLOY_DEV_PASS
- sshpass -e ssh $DEPLOY_DEV_USER@$DEPLOY_DEV_HOST "git -C ${DEPLOY_DEV_PATH} pull"
- sshpass -e ssh $DEPLOY_DEV_USER@$DEPLOY_DEV_HOST $DEPLOY_DEV_PATH/deploy-dev.sh
env:
  global:
  - secure: OLQXzjgBYUAhY2pmkOIThvHmMgGfjPd76GyAZjDunllxHkw9LMU+xKC2HFStZ2EVIm4ztEWaAgVj+QDyoGa0sNd7DXLF7kcj0Na+rXY+7Ox3jmN9CU7FRvUUzbvyROM48esX339GJYWXTrd6volI/Zfk/VnJL6ctQDt8HafD6MYLf32a8QLQrFNqG1vAENL+LFjGfDBlKsiIbNqIjIL1PUXvwE0YhPYbqn3qSKrzVMF4meyjC7bwn8xElghkyriptiKNEpZ6/Jq7AOrfobdqBeJzdQy+soaoBqgv1T+0+VT8KNtMiSP5BwER7j2crF++IXn8z4PI12HG3f4szOG1zYXaiJ8p/fy7C1NnOTqj21gFCspWjkkDbvQo62dLdWPQku0tPDA+hvKYD67FYTVFttZWJsypTGz7buApyS7R6j/I+NGBMOiuqbTVOaZAibFYlhOwRXOXFXTXzq9yQWrMoGQxG1Sre3DukioOYgi5fwF0wiMxRTzVX8j0SwDcKmg/merEwpdJa0CXKQfWDYN4g8dp74ze3KwwVDqy31y4iCb7Ky5nCOhyrkymPHb6LkNmBIn+vZHBmfJdjpOIODpgOctyOhDstRQtOoJrA0vT33WwlpagrGOioePHxS7sJvOYLDpSgLDTYbF1vZnVMK9cOnglwACnTmK1uL4EMQE5CXg=
  - secure: igCJJmsZRGGOyO/6P1fVasSjpw4XA4vGhAxZ0MJ0PEcuRXQ6RtFelMCvdnaTKKNl/vY/tczFJl7m+FT1EteZJt7mEJ8Y6FIwda9E/RdAhGDAyDLPuDKJ/XXp2l49kn5mI5sbVsnsC0AnyE8aKQrZMN/QWtf9tpDC//4lmUfC8eQ4K5rfeRWTz37KPqxSlp3ng3UE+SVg/K4yLGFdrK/voprcYtpcfN1ICxJl5yrB7Rdg1HsTyNAEj+e0xlabMT5lFvMDLg7NqOdCL92DxhTjq1T64mooW8tS+gbFcSaXM6j9BI2Nitrgygf6VgD/JutYIbtoieQQ6rZF5cEVQVOsnpPYwONU5pKZlRmguopy6ZE+QhmhHrSyVBR+pyU/tg2tmvXp84rblYfCPobj8xeziT26ohOb0wuBU2UluHKsWgGPfXkTXrWFcKc0V2BIz4++q7alThBxjThHbspJ9NRSwk15mxaEP3hhj3/ZamshGvntAR1Zn0+4mwEwYIW8QPanSvlApWe8r2Tl+6PffZ/V6BFxOoF1wGGRIQ39IcNbyPLyRsidrY5g2VKhVtJvfCOpRGLhIs6XRcN+O+by3ugtC3O18J/cw3Y5EtOytigf3k8gfmlWGt3kVlBnznETemsec8OdYpxgUXtmp/owU6sLxdeyGbsNcR6nF03/kMRVmrY=
  - secure: ElE8LOLifRMKTxqGkw9g60usZU+6nV9sjuBzeNHKByHYGHcJGr6zX0H9pvwZ0qex2gr7+uNPZMTzxMMmG9SIhxFbI0MPAf1XqVoDRkz3qhnaaCwJUnQmIHOt4MTl/FvlZaBoJS2wktYvnn0nA1wR8dtbgmHGNnOd2cvWS0kAyRnZNE5nD/GN1sFnBrV8N57TF561TH4BLk/2CI7f/lrSxbjwb6x22QkPqe0BaQYpY6DaYz9Md0EQ3F75FW8eT1NBal2bZMmQ8VputBwOyb/boHIMUzkW/6ruAV+6CbzSXaIoiT4leSieguEwilLGu/guSYvWkGrTeZ5fbwmzSL+fIY4FpT3ujzlyAK2Qt/WRX4F88uqP/B6v8UnuWkyTaBD78T+yUpj9FP2qATlMJpUNbHd6U07Ea/PXthzZdSwIAW4HQEmx1O2lSmdryY4a60X5GjP7SD9o3p0Wf39ORp2W3jgCTMAGzOVUHqzZgMJR04I0r1NozI6GQmQAy0YX6KX3PbpFXWkqoViaHgYrp9N0+kNyhWuS1i2CzGZXbamVk4LtE3AL6YCYZ2cGfSL0z7ZQhLSMrEVeZ3MeFYHaClcYFo+5F8EdrDMsw9zvUzzZ3EEBIKwM8NNGz5HsofLAf9qI1SBVyuoLH3nQU2Iom23H6e0of3iXAxpGvsz6xd/8AI8=
  - secure: WekrDjTlBlmg8bnx0H6NQOYsyXNaQVrlK4ACJPgBUGjXIRd8N7touMcNcglwgkm/BCOhZkyV4CeP8JQJKYp6uYGLYz8Em2WyRz5+OiJAT1gIyFfvqL+034TVkg1e0ISPW5wQxnzSYaeV699TMzNNXK1y9nIRp1sUii+pbjQkfr1DsI0YO51A3vSuhmhn93pPn4oK6Qoi9gY/5rYKbtQKiiqdapkM8FblZ7cb/RvGo9RqXLUlJYbrguW+ktmq9NWHQnFQYfiBfRhEhNla5IRc4xy09OWeBYz5tnjH1t6jycdwbh8KOygNyJMfh8lEBU1Ex3Dp0iT6aAhkggM1qpTU1d9mHjgFCKm+AiHhgiVbxpLMn3e5VAy46DHCjGIL9jT/+4P30iEL+PApeCgGCN/9vAEGADgWl9GyUCUk979fK1F0nCJVVnPVQ/PaFLsdmME0Sh1AXlZbsmNF8LRtFaM4Gg82B1sfWAq2gBnYxKPfp+nZ1khftDK+O0aNGxkLTuYz1pdDR/eJCxIQH3c94BA2Q7XgLxSOWfunRwW2yUTqoux8/WQgzASxRaBAV4lDBKbwAt0CTJuG978sCxjOndkY0Pbk1S19JGDUKY1jrJcTBaBE5m4d9vM5ttrl6S4NAi41xTB+J3XVlIoOHqS5uMRkAkn1qYrupbh3tNgG6CVWp4g=
